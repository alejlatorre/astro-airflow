version: "3.1"
services:
  scheduler:
    volumes:
      - ./dbt:/usr/local/airflow/dbt:rw

  webserver:
    volumes:
      - ./dbt:/usr/local/airflow/dbt:rw
    environment:
      - DBT_ASTRO_POSTGRES_HOST=${DBT_ASTRO_POSTGRES_HOST}
      - DBT_ASTRO_POSTGRES_USER=${DBT_ASTRO_POSTGRES_USER}
      - DBT_ASTRO_POSTGRES_PASSWORD=${DBT_ASTRO_POSTGRES_PASSWORD}
      - DBT_ASTRO_POSTGRES_PORT=${DBT_ASTRO_POSTGRES_PORT}
      - DBT_ASTRO_POSTGRES_DBNAME=${DBT_ASTRO_POSTGRES_DBNAME}
      - DBT_ASTRO_POSTGRES_SCHEMA=${DBT_ASTRO_POSTGRES_SCHEMA}

  triggerer:
    volumes:
      - ./dbt:/usr/local/airflow/dbt:rw
